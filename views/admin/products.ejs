<%- include("../includes/start.ejs") %>
<body>
  <%- include("../includes/navigation.ejs") %>
  <main class="main">
    <% if(error){ %>
      <div class="user-message user-message--error"><%= error %></div>
    <% } %>
    <% if (products.length > 0) { %>
    <section class="main__section">
      <div class="grid">
        <% {products.map(item => { %> <% const {name, image, price, _id}
        = item %>
        <div class="item__card">
          <div class="item__image">
            <img src="<%= image %>" alt="product image" />
          </div>
          <div class="item__info">
            <p>$<%= price %></p>
            <p><%= name %></p>
          </div>
          <div class="item__btnCon">
            <form
              action="/admin/edit-products/<%= _id %>?editing=true"
              method="post"
            >
              <input type="text" name="_csrf" value="<%= csrfToken %>" class="offPage">
              <button class="item__btn">Edit</button>
            </form>
            <input value="<%= _id %>" type="hidden" name="productId" id="productId">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" id="csrf">
            <button onclick="deleteProduct(this)" class="item__btn">Delete</button>
          </div>
        </div>
        <% })} %>
      </div>
    </section>
    <% } else { %>
    <p class="main__p">No Products added yet</p>
    <% } %>
  </main>
</body>
<script src="/js/client.js"></script>
<%- include("../includes/end.ejs") %>
